{% extends 'algosite/base.html' %}

{% block title %}–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞{% endblock %}

{% block content %}
<div class="container mt-4">
  <h1 class="mb-4">–¢–µ–º—ã</h1>
  <ul class="list-group">
    {% for topic in topics %}
      <li class="list-group-item d-flex justify-content-between align-items-center">
        <a href="{% url 'topic_detail' topic.slug %}" class="text-decoration-none">{{ topic.title }}</a>
        {% if user.is_authenticated and user.is_staff %}
          <form method="post" action="{% url 'delete_topic' topic.id %}" onsubmit="return confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç—É —Ç–µ–º—É?');">
            {% csrf_token %}
            <button type="submit" class="btn btn-sm btn-danger">üóëÔ∏è</button>
          </form>
        {% endif %}
      </li>
    {% empty %}
      <li class="list-group-item">–¢–µ–º—ã –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç.</li>
    {% endfor %}
  </ul>

  <div class="mt-4">
    {% if user.is_authenticated %}
      <a href="{% url 'topic_requests' %}" class="btn btn-primary me-2">–ó–∞—è–≤–∫–∏</a>
      <form method="post" action="{% url 'logout' %}" style="display: inline;">
        {% csrf_token %}
        <button type="submit" class="btn btn-danger">–í—ã–π—Ç–∏</button>
      </form>
    {% else %}
      <a href="{% url 'submit_topic' %}" class="btn btn-success me-2">–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–≤–æ—é —Ç–µ–º—É</a>
      <a href="{% url 'login' %}" class="btn btn-primary">–í—Ö–æ–¥ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–∏</a>
    {% endif %}
  </div>
</div>
{% endblock %}
