{% extends 'algosite/base.html' %}
{% block title %}Заявки на добавление темы{% endblock %}

{% block content %}
<div class="container mt-4">
  <h2 class="mb-4 text-center">Заявки на добавление темы</h2>

  {% if requests %}
  <ul class="list-group">
    {% for request in requests %}
      <li class="list-group-item mb-3">
        <h3>{{ request.title }}</h3>
        <p>{{ request.explanation }}</p>

        <h5>Пример кода:</h5>
        <pre>{{ request.example_code }}</pre>

        <h5>Визуализация упражнения:</h5>
        <div class="border p-3 rounded bg-light mb-3">
          {{ request.exercise_render_code|safe }}
        </div>

        <h5>Логика проверки:</h5>
        <pre>{{ request.exercise_logic_code }}</pre>

        <form method="post" action="{% url 'approve_request' request.id %}" style="display: inline;">
          {% csrf_token %}
          <button class="btn btn-success me-2">Одобрить</button>
        </form>

        <form method="post" action="{% url 'reject_request' request.id %}" style="display: inline;">
          {% csrf_token %}
          <button class="btn btn-danger">Отклонить</button>
        </form>
      </li>
    {% endfor %}
  </ul>
  {% else %}
  <p class="text-center">Заявок нет.</p>
  {% endif %}

  <a href="{% url 'index' %}" class="btn btn-primary mt-4 d-block mx-auto" style="max-width: 250px;">Назад на главную</a>
</div>
{% endblock %}
